---
layout: post
title: ë™ì‹œì„± ë¬¸ì œë¥¼ ì œì–´í•˜ëŠ” ë°©ë²•
date: '2021-09-20'
description: 'ë™ì‹œì„± ë¬¸ì œë¥¼ ì œì–´í•˜ëŠ” ë°©ë²•'
categories: ['Language', 'Java', 'Concurrency Control']
tags: ['Language', 'Java', 'Concurrency Control']
---
# ë™ì‹œì„± ë¬¸ì œë¥¼ ì œì–´í•˜ëŠ” ë°©ë²•

### ğŸ“Œ ì •ì˜

ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— í•˜ë‚˜ì˜ ìì›ì„ ê³µìœ í•  ë•Œ ë™ì‹œì„± ë¬¸ì œ, ë°ë“œë½ ë“± ì—¬ëŸ¬ ë¬¸ì œê°€ ë°œìƒí•œë‹¤. í•´ë‹¹ ë¬¸ì œ ì¤‘ ë™ì‹œì„± ë¬¸ì œë¥¼ ì œì–´í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì.

### 1ï¸âƒ£ ì•”ì‹œì  ì ê¸ˆ

í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œê°€ í•´ë‹¹ ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ê³  ìˆì„ ë•Œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ í•´ë‹¹ ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ì§€ ëª»í•˜ê³  ëŒ€ê¸°í•˜ê²Œ í•˜ëŠ” ë°©ë²•. ì ê¸ˆì€ ë©”ì†Œë“œ, ë³€ìˆ˜ì— ê° ê° ê±¸ ìˆ˜ ìˆë‹¤.

##### ğŸ˜ ì˜ˆì œ

```java
class Count {
    private int count;
    
    public synchronized int view() {
        return count++;
    }
}
```

ìœ„ì˜ ì˜ˆì œëŠ” ë©”ì†Œë“œ ì ê¸ˆì´ë‹¤.

```java
class Count {
    private Integer count;
    public int view() {
        synchronized (this.count) {
            return count++;
        }
    }
}
```

### 2ï¸âƒ£ ëª…ì‹œì  ì ê¸ˆ

`synchronized` í‚¤ì›Œë“œ ì—†ì´ ëª…ì‹œì ìœ¼ë¡œ `ReentrantLock`ì„ ì‚¬ìš©í•˜ëŠ” ì ê¸ˆ.

ìš´ì˜ì²´ì œì—ì„œ **ì„ê³„ì˜ì—­**ê³¼ ë¹„ìŠ·í•œ ëŠë‚Œì´ë‹¤.

##### ğŸ˜ ì˜ˆì‹œ

```java
public class CountingTest {
    public static void main(string[] args) {
        Count count = new Count();
        for (int i = 0; i < 100; i++) {
            new Thread() {
                public void run() {
                    for(int j = 0; j < 1000; j++) {
                        count.getLock().lock();
                        System.out.println(count.view());
                        count.getLock().unlock();
                    }
                }
            }.start();
        }
    }
}

class Count {
    private int count = 0;
    private Lock lock = new ReentrantLock();
    public int view() {
        return count++;
    }
    public Lock getLock() {
        return lock;
    }
}
```

### 3ï¸âƒ£ volatile

ìŠ¤ë ˆë“œë“¤ì´ ìì›ì— read, writeë¥¼ ì§„í–‰í•  ë•Œ í•­ìƒ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•˜ì§€ ì•ŠëŠ”ë‹¤. ì„±ëŠ¥ì˜ í–¥ìƒì„ ìœ„í•´ CPU ìºìŠ¤ì— ê°’ì„ ì €ì¥í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ê°’ì´ ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ì‹¤ì œ ê°’ê³  í•­ìƒ ì¼ì¹˜í•˜ëŠ”ì§€ ë³´ì¥í•  ìˆ˜ ì—†ë‹¤.

ë©”ì¸ ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ì‹¤ì œ ìì›ì˜ ê°’ì„ ë³¼ ìˆ˜ ìˆëŠ” ê°œë…ì„ **ìì›ì˜ ê°€ì‹œì„±**ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

`volatile`ì€ ìœ„ì™€ ê°™ì€ CPU ìºì‹œ ì‚¬ìš©ì„ ë§‰ëŠ”ë‹¤. ë³€ìˆ˜ì— volatile í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ì£¼ë©´ í•´ë‹¹ ë³€ìˆ˜ëŠ” ìºì‹œì— ì €ì¥ë˜ëŠ” ëŒ€ìƒì—ì„œ ì œì™¸ëœë‹¤. ìºì‹œ ì‚¬ìš©ìœ¼ë¡œ ì¸í•œ **í…Œì´í„° ë¶ˆì¼ì¹˜**ë¥¼ ë§‰ëŠ”ë‹¤.

### 4ï¸âƒ£ Concurrent

Atomic~~ì™€ ê°™ì€ í´ë˜ìŠ¤ëŠ” ë‹¨ìˆœí•œ ì¦ê°ì—°ì‚°ì„ ë©”ì†Œë“œë¡œ ì œê³µí•´ì¤€ë‹¤. í•´ë‹¹ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ Thread-safeí•˜ê²Œ êµ¬ì¡°í™”ë˜ì–´ ìˆë‹¤.

Concurrent~~ì™€ ê°™ì€ ì»¬ë™ì…˜ë“¤ì€ ë½ì„ ì‚¬ìš©í•  ë•Œ ë°œìƒí•˜ëŠ” ì„±ëŠ¥ ì €í•˜ë¥¼ ìµœì†Œí•œìœ¼ë¡œ ë§Œë“¤ì–´ë‘ì—ˆë‹¤. 

