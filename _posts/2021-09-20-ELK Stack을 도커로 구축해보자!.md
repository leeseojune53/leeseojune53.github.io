---
layout: post
title: ELK Stackì„ ë„ì»¤ë¡œ êµ¬ì¶•í•´ë³´ì!
date: '2021-09-20'
description: 'ELK Stackì„ ë„ì»¤ë¡œ êµ¬ì¶•í•´ë³´ì!'
categories: ['DevOps', 'ELK', 'Docker']
tags: ['DevOps', 'ELK', 'Docker']
---
# ELK Stackì„ ë„ì»¤ë¡œ êµ¬ì¶•í•´ë³´ì!

### ğŸŠ ì‹œì‘í•˜ê¸° ì „ì—..

ì´ ê¸€ì„ ì½ê¸° ì „ì— Dockerì˜ ê¸°ë³¸ì ì¸ ì‘ë™ì›ë¦¬, Docker Networkì— ëŒ€í•œ ì§€ì‹ì´ ìˆì–´ì•¼í•©ë‹ˆë‹¤.

ë˜í•œ Dockerê°€ Serverì— installë˜ì–´ìˆì–´ì•¼í•©ë‹ˆë‹¤.

### 1ï¸âƒ£ ê°€ì¥ ë¨¼ì €

https://github.com/EntryDSM/BELK

ìœ„ì˜ ë§í¬ë¥¼ serverì— clone ë°›ìŠµë‹ˆë‹¤.

`git clone https://github.com/EntryDSM/BELK`

### 2ï¸âƒ£ ë‘ ë²ˆì§¸ë¡œ

í•´ë‹¹ ë””ë ‰í† ë¦¬ ë‚´ë¶€ë¡œ ë“¤ì–´ê°€ì„œ `docker-compose.yml` íŒŒì¼ì„ ì—½ë‹ˆë‹¤.

`ELASTIC_PASSWORD:`ë¥¼ ì„¤ì •í•´ì¤ë‹ˆë‹¤. ê¸°ë³¸ê°’ì€ `changeme` ì…ë‹ˆë‹¤.

yml íŒŒì¼ ë‚´ë¶€ì˜ filebeatì„¤ì •ì—ì„œ ë‘ ë²ˆì§¸ volumeì„¤ì •ì—ì„œ `source`ëŠ” hostì—ì„œ ë¡œê·¸ì˜ ìœ„ì¹˜, `target`ëŠ” containerì—ì„œ ë¡œê·¸ì˜ ìœ„ì¹˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

### 3ï¸âƒ£ ì„¸ ë²ˆì§¸ë¡œ

logstash/configë¡œ ë“¤ì–´ê°€ì„œ `logstash.yml`ì—ì„œ `xpack.monitoring.elasticsearch.password`ë¥¼ ìœ„ì—ì„œ ì„¤ì •í–ˆë˜ ë¹„ë°€ë²ˆí˜¸ë¡œ êµì²´í•´ì¤ë‹ˆë‹¤.

kibana/configì—ì„œë„ ë™ì¼í•©ë‹ˆë‹¤.

### 4ï¸âƒ£ ë„¤ ë²ˆì§¸ë¡œ

filebeat/configë¡œ ë“¤ì–´ê°€ì„œ `filebeat.yml`ì—ì„œ `paths`ë¥¼ ì„¤ì •í•´ì¤ë‹ˆë‹¤. pathsì˜ ê°’ì€ ë‘ ë²ˆì§¸ì—ì„œ ì„¤ì •í•´ì¤€ targetì˜ ìœ„ì¹˜ë¥¼ ì„¤ì •í•´ì£¼ë©´ ë©ë‹ˆë‹¤.

### 5ï¸âƒ£ ë‹¤ì„¯ ë²ˆì§¸ë¡œ

logstash/pipelineì—ì„œ `logstash.conf`ì—ì„œ filter ë‚´ë¶€ëŠ” ë¡œê·¸ íŒŒì¼ì˜ í˜•ì‹ì— ë§ê²Œ ì‘ì„±í•˜ë©´ ë©ë‹ˆë‹¤.

`output`ì—ì„œ `password`ëŠ” ë‘ ë²ˆì§¸ì—ì„œ ì„¤ì •í–ˆë˜ passwordë¥¼ ê¸°ì…í•´ì£¼ë©´ ë©ë‹ˆë‹¤.

### âœ… ëìœ¼ë¡œ

ìœ„ì—ì„œ êµ¬ì¶•í•œ ELK Stackì˜ ë„ì‹ë„ì´ë‹¤.

![img](https://raw.githubusercontent.com/leeseojune53/yatudy/bfa3147e122d1f803d0e4711e86363e6209e0257/images/Log%20analysis%20flow.svg)